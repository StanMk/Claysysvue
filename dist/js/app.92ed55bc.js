(function(){"use strict";var t={3744:function(t,n,i){var o=i(9242),e=i(3396);const a={id:"app"},c={class:"nav-item"};function r(t,n,i,o,r,s){const u=(0,e.up)("notifications");return(0,e.wg)(),(0,e.iD)("div",a,[(0,e._)("nav",null,[(0,e._)("div",c,[(0,e.Wm)(u,{count:r.unreadCount,onSendNotification:s.sendNotification,onResetNotifications:s.resetNotifications},null,8,["count","onSendNotification","onResetNotifications"])])])])}var s=i(7139);const u=t=>((0,e.dD)("data-v-32887660"),t=t(),(0,e.Cn)(),t),f={class:"navbar"},l={class:"nav-item"},d={class:"notifications"},h={class:"notification-button-container"},p=u((()=>(0,e._)("i",{class:"ri-notification-line bell-icon"},null,-1))),v={key:0,class:"notification-count"},g={key:0,class:"notification-list"},w=u((()=>(0,e._)("div",{class:"welcome-message"},"Welcome to real-time notification portal",-1))),b={class:"post__buttons"};function N(t,n,i,o,a,c){return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("nav",f,[(0,e._)("div",l,[(0,e._)("div",d,[(0,e._)("div",h,[(0,e._)("button",{class:"notification-button",onClick:n[0]||(n[0]=(...t)=>c.toggleNotifications&&c.toggleNotifications(...t))},[p,i.count>0?((0,e.wg)(),(0,e.iD)("span",v,(0,s.zw)(c.formatUnreadCount(i.count)),1)):(0,e.kq)("",!0)])]),a.showNotifications?((0,e.wg)(),(0,e.iD)("div",g,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.notifications,(t=>((0,e.wg)(),(0,e.iD)("div",{key:t.id,class:"notification"},(0,s.zw)(t.message),1)))),128))])):(0,e.kq)("",!0)]),w])]),(0,e._)("div",b,[(0,e._)("button",{class:"send-notification-button",onClick:n[1]||(n[1]=(...t)=>c.sendNotification&&c.sendNotification(...t))},"Send Notification"),(0,e._)("button",{class:"reset-notification-button",onClick:n[2]||(n[2]=(...t)=>c.resetNotifications&&c.resetNotifications(...t))},"Reset Notifications")])],64)}var m={data(){return{showNotifications:!1,notifications:[]}},props:{count:{type:Number,required:!0}},methods:{toggleNotifications(){this.showNotifications=!this.showNotifications},formatUnreadCount(t){return t>99?"99+":t.toString()},sendNotification(){this.$emit("send-notification")},resetNotifications(){this.$emit("reset-notifications")}}},y=i(89);const _=(0,y.Z)(m,[["render",N],["__scopeId","data-v-32887660"]]);var C=_,k=i(4161),O=i(6195),R=i(8396),S=i(6811),U={name:"App",components:{Notifications:C},data(){return{connection:null,unreadCount:0}},methods:{initSignalR(){this.connection=(new O.s).withUrl("http://localhost:55680/notificationsHub",{skipNegotiation:!0,transport:R.n.WebSockets}).configureLogging(S.i.Information).build(),this.connection.on("ReceiveNotification",(()=>{this.unreadCount++})),this.connection.on("ReceiveNotification",(()=>{console.log("Received new notification."),this.unreadCount++})),this.connection.start().then((()=>{console.log("SignalR connection established.")})).catch((t=>{console.error("Error while establishing SignalR connection:",t)}))},async fetchUnreadCount(){try{const t=await k.Z.get("http://localhost:55680/api/notifications/unread");this.unreadCount=t.data.unreadCount}catch(t){console.error("Error while fetching unread notification count:",t)}},formatUnreadCount(t){return t>99?"99+":t.toString()},async sendNotification(){try{await k.Z.post("http://localhost:55680/api/notifications/send"),this.fetchUnreadCount()}catch(t){console.error("Error while sending notification:",t)}},async resetNotifications(){try{await k.Z.post("http://localhost:55680/api/notifications/reset"),this.fetchUnreadCount()}catch(t){console.error("Error while resetting notifications:",t)}}},created(){this.fetchUnreadCount(),this.initSignalR()}};const D=(0,y.Z)(U,[["render",r]]);var j=D;(0,o.ri)(j).mount("#app")}},n={};function i(o){var e=n[o];if(void 0!==e)return e.exports;var a=n[o]={exports:{}};return t[o].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(n,o,e,a){if(!o){var c=1/0;for(f=0;f<t.length;f++){o=t[f][0],e=t[f][1],a=t[f][2];for(var r=!0,s=0;s<o.length;s++)(!1&a||c>=a)&&Object.keys(i.O).every((function(t){return i.O[t](o[s])}))?o.splice(s--,1):(r=!1,a<c&&(c=a));if(r){t.splice(f--,1);var u=e();void 0!==u&&(n=u)}}return n}a=a||0;for(var f=t.length;f>0&&t[f-1][2]>a;f--)t[f]=t[f-1];t[f]=[o,e,a]}}(),function(){i.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(n,{a:n}),n}}(),function(){i.d=function(t,n){for(var o in n)i.o(n,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={143:0};i.O.j=function(n){return 0===t[n]};var n=function(n,o){var e,a,c=o[0],r=o[1],s=o[2],u=0;if(c.some((function(n){return 0!==t[n]}))){for(e in r)i.o(r,e)&&(i.m[e]=r[e]);if(s)var f=s(i)}for(n&&n(o);u<c.length;u++)a=c[u],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(f)},o=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(3744)}));o=i.O(o)})();
//# sourceMappingURL=app.92ed55bc.js.map